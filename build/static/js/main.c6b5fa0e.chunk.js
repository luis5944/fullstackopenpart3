(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n(17),i=n.n(o),r=n(3),a=n(18),s=n(8),u=n(4),j=n.n(u),d="http://localhost:3001/api/persons",b=function(){return j()(d)},f=function(e){return j.a.get("".concat(d,"/").concat(e))},h=function(e){return j.a.post(d,e)},l=function(e,t){return j.a.put("".concat(d,"/").concat(e),Object(s.a)(Object(s.a)({},t),{},{number:t.number}))},O=function(e){j.a.delete("".concat(d,"/").concat(e))},m=n(0),p=function(e){var t=e.persons,n=e.setPersons,o=e.setNotification,i=Object(c.useState)(""),s=Object(r.a)(i,2),u=s[0],j=s[1],d=Object(c.useState)(""),b=Object(r.a)(d,2),f=b[0],O=b[1],p=function(e,t){o({message:"".concat(e," ").concat(t),type:"notification"}),setTimeout((function(){o(null)}),2e3)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"add a new"}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:u,onChange:function(e){j(e.target.value)}})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:f,onChange:function(e){O(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var c=t.find((function(e){return e.name===u}));if(c)return window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&l(c.id,{name:c.name,number:f}).then((function(e){n(t.map((function(t){return t.id!==c.id?t:e.data})))})),void p("Changed",c.name);h({name:u,number:f}).then((function(e){n([].concat(Object(a.a)(t),[e.data]))})),p("Added",u)},children:"add"})})]})]})},v=function(e){var t=e.persons,n=e.search,c=e.setPersons,o=e.setNotification,i=n?t.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())})):t,r=function(e){o({message:"Information of ".concat(e.name," has already been remmoved from server"),type:"error"}),setTimeout((function(){o(null)}),2e3)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Numbers"}),i.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsxs)("p",{children:["".concat(e.name," - ").concat(e.number)," ",Object(m.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&(f(e.id).catch((function(t){return r(e)})),O(e.id),c(t.filter((function(t){return t.id!==e.id}))))}(e)},children:"delete"})]})},e.id)}))]})},x=(n(42),function(e){var t=e.notification;return Object(m.jsx)("div",{className:t.type,children:Object(m.jsx)("p",{children:t.message})})}),g=function(e){var t=e.search,n=e.setSearch,c=e.notification;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),c?Object(m.jsx)(x,{notification:c}):null,Object(m.jsxs)("div",{children:["filter show with: ",Object(m.jsx)("input",{value:t,onChange:function(e){n(e.target.value)}})]})]})},w=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)(""),a=Object(r.a)(i,2),s=a[0],u=a[1],j=Object(c.useState)({}),d=Object(r.a)(j,2),f=d[0],h=d[1];return Object(c.useEffect)((function(){b().then((function(e){return o(e.data)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(g,{search:s,setSearch:u,notification:f}),Object(m.jsx)(p,{persons:n,setPersons:o,setNotification:h}),Object(m.jsx)(v,{persons:n,search:s,setPersons:o,setNotification:h})]})};i.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.c6b5fa0e.chunk.js.map