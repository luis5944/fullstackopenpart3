(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var c=t(1),o=t(17),i=t.n(o),r=t(3),a=t(18),s=t(8),u=t(4),j=t.n(u),d="/api/persons",b=function(){return j()(d)},f=function(e){return j.a.get("".concat(d,"/").concat(e))},h=function(e){return j.a.post(d,e)},l=function(e,n){return j.a.put("".concat(d,"/").concat(e),Object(s.a)(Object(s.a)({},n),{},{number:n.number}))},O=function(e){j.a.delete("".concat(d,"/").concat(e))},m=t(0),p=function(e){var n=e.persons,t=e.setPersons,o=e.setNotification,i=Object(c.useState)(""),s=Object(r.a)(i,2),u=s[0],j=s[1],d=Object(c.useState)(""),b=Object(r.a)(d,2),f=b[0],O=b[1],p=function(e,n,t){o({message:"".concat(e," ").concat(n),type:t}),setTimeout((function(){o(null)}),2e3)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("h2",{children:"add a new"}),Object(m.jsxs)("form",{children:[Object(m.jsxs)("div",{children:["name: ",Object(m.jsx)("input",{value:u,onChange:function(e){j(e.target.value)}})]}),Object(m.jsxs)("div",{children:["number: ",Object(m.jsx)("input",{value:f,onChange:function(e){O(e.target.value)}})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",onClick:function(e){e.preventDefault();var c=n.find((function(e){return e.name===u}));if(c)return window.confirm("".concat(u," is already added to phonebook, replace the old number with a new one?"))&&l(c.id,{name:c.name,number:f}).then((function(e){t(n.map((function(n){return n.id!==c.id?n:e.data})))})),void p("Changed",c.name,"notification");h({name:u,number:f}).then((function(e){t([].concat(Object(a.a)(n),[e.data]))})).catch((function(e){return p(e.response.data.error,null,"error")})),p("Added",u,"notification")},children:"add"})})]})]})},v=function(e){var n=e.persons,t=e.search,c=e.setPersons,o=e.setNotification,i=t?n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})):n,r=function(e){o({message:"Information of ".concat(e.name," has already been remmoved from server"),type:"error"}),setTimeout((function(){o(null)}),2e3)};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Numbers"}),i.map((function(e){return Object(m.jsx)("div",{children:Object(m.jsxs)("p",{children:["".concat(e.name," - ").concat(e.number)," ",Object(m.jsx)("button",{onClick:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&(f(e.id).catch((function(n){return r(e)})),O(e.id),c(n.filter((function(n){return n.id!==e.id}))))}(e)},children:"delete"})]})},e.id)}))]})},x=(t(42),function(e){var n=e.notification;return Object(m.jsx)("div",{className:n.type,children:Object(m.jsx)("p",{children:n.message})})}),g=function(e){var n=e.search,t=e.setSearch,c=e.notification;return Object(m.jsxs)("div",{children:[Object(m.jsx)("h1",{children:"Phonebook"}),c?Object(m.jsx)(x,{notification:c}):null,Object(m.jsxs)("div",{children:["filter show with: ",Object(m.jsx)("input",{value:n,onChange:function(e){t(e.target.value)}})]})]})},w=function(){var e=Object(c.useState)([]),n=Object(r.a)(e,2),t=n[0],o=n[1],i=Object(c.useState)(""),a=Object(r.a)(i,2),s=a[0],u=a[1],j=Object(c.useState)({}),d=Object(r.a)(j,2),f=d[0],h=d[1];return Object(c.useEffect)((function(){b().then((function(e){return o(e.data)}))}),[]),Object(m.jsxs)("div",{children:[Object(m.jsx)(g,{search:s,setSearch:u,notification:f}),Object(m.jsx)(p,{persons:t,setPersons:o,setNotification:h}),Object(m.jsx)(v,{persons:t,search:s,setPersons:o,setNotification:h})]})};i.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.44e617e4.chunk.js.map